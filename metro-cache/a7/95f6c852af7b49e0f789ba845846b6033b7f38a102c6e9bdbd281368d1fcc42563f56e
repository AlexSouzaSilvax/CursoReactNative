{"dependencies":[{"name":"react-native","data":{"isAsync":false}},{"name":"../ReanimatedModule","data":{"isAsync":false}},{"name":"./AnimatedNode","data":{"isAsync":false}},{"name":"./AnimatedValue","data":{"isAsync":false}},{"name":"./AnimatedAlways","data":{"isAsync":false}},{"name":"fbjs/lib/invariant","data":{"isAsync":false}},{"name":"./createEventObjectProxyPolyfill","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _reactNative = _$$_REQUIRE(_dependencyMap[0], \"react-native\");\n\n  var _ReanimatedModule = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"../ReanimatedModule\"));\n\n  var _AnimatedNode2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"./AnimatedNode\"));\n\n  var _AnimatedValue = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"./AnimatedValue\"));\n\n  var _AnimatedAlways = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"./AnimatedAlways\"));\n\n  var _invariant = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"fbjs/lib/invariant\"));\n\n  var _createEventObjectProxyPolyfill = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[6], \"./createEventObjectProxyPolyfill\"));\n\n  function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n  function _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\n  function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n  function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n  function _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\n  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n  function sanitizeArgMapping(argMapping) {\n    var eventMappings = [];\n    var alwaysNodes = [];\n\n    var traverse = function traverse(value, path) {\n      if (value instanceof _AnimatedValue.default) {\n        eventMappings.push(path.concat(value.__nodeID));\n      } else if (typeof value === 'object' && value.__val) {\n        eventMappings.push(path.concat(value.__val.__nodeID));\n      } else if (typeof value === 'function') {\n        var node = new _AnimatedValue.default(0);\n        alwaysNodes.push(new _AnimatedAlways.default(value(node)));\n        eventMappings.push(path.concat(node.__nodeID));\n      } else if (typeof value === 'object') {\n        for (var key in value) {\n          traverse(value[key], path.concat(key));\n        }\n      }\n    };\n\n    (0, _invariant.default)(argMapping[0] && argMapping[0].nativeEvent, 'Native driven events only support animated values contained inside `nativeEvent`.');\n    var ev = argMapping[0].nativeEvent;\n\n    if (typeof ev === 'object') {\n      traverse(ev, []);\n    } else if (typeof ev === 'function') {\n      var proxyHandler = {\n        get: function get(target, name) {\n          if (name === '__isProxy') {\n            return true;\n          }\n\n          if (!target[name] && name !== '__val') {\n            target[name] = new Proxy({}, proxyHandler);\n          }\n\n          return target[name];\n        },\n        set: function set(target, prop, value) {\n          if (prop === '__val') {\n            target[prop] = value;\n          }\n        }\n      };\n      var proxy = _reactNative.Platform.OS === 'android' ? (0, _createEventObjectProxyPolyfill.default)() : new Proxy({}, proxyHandler);\n      alwaysNodes.push(new _AnimatedAlways.default(ev(proxy)));\n      traverse(proxy, []);\n    }\n\n    return {\n      eventMappings: eventMappings,\n      alwaysNodes: alwaysNodes\n    };\n  }\n\n  var AnimatedEvent = function (_AnimatedNode) {\n    _inherits(AnimatedEvent, _AnimatedNode);\n\n    function AnimatedEvent(argMapping) {\n      var _this;\n\n      var config = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n      _classCallCheck(this, AnimatedEvent);\n\n      var _sanitizeArgMapping = sanitizeArgMapping(argMapping),\n          eventMappings = _sanitizeArgMapping.eventMappings,\n          alwaysNodes = _sanitizeArgMapping.alwaysNodes;\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(AnimatedEvent).call(this, {\n        type: 'event',\n        argMapping: eventMappings\n      }));\n      _this.__isNative = true;\n      _this._alwaysNodes = alwaysNodes;\n      return _this;\n    }\n\n    _createClass(AnimatedEvent, [{\n      key: \"attachEvent\",\n      value: function attachEvent(viewRef, eventName) {\n        for (var i = 0; i < this._alwaysNodes.length; i++) {\n          this._alwaysNodes[i].__attach();\n        }\n\n        this.__attach();\n\n        var viewTag = (0, _reactNative.findNodeHandle)(viewRef);\n\n        _ReanimatedModule.default.attachEvent(viewTag, eventName, this.__nodeID);\n      }\n    }, {\n      key: \"detachEvent\",\n      value: function detachEvent(viewRef, eventName) {\n        for (var i = 0; i < this._alwaysNodes.length; i++) {\n          this._alwaysNodes[i].isNativelyInitialized() && this._alwaysNodes[i].__detach();\n        }\n\n        var viewTag = (0, _reactNative.findNodeHandle)(viewRef);\n\n        _ReanimatedModule.default.detachEvent(viewTag, eventName, this.__nodeID);\n\n        this.__detach();\n      }\n    }]);\n\n    return AnimatedEvent;\n  }(_AnimatedNode2.default);\n\n  exports.default = AnimatedEvent;\n});","map":[[7,0,1,0],[9,0,2,0],[11,0,4,0],[13,0,5,0],[15,0,6,0],[17,0,8,0],[19,0,9,0],[39,0,11,0],[39,11,11,9,"sanitizeArgMapping"],[39,29,11,0],[39,30,11,28,"argMapping"],[39,40,11,0],[39,42,11,40],[40,0,14,2],[40,8,14,8,"eventMappings"],[40,21,14,21],[40,24,14,24],[40,26,14,2],[41,0,15,2],[41,8,15,8,"alwaysNodes"],[41,19,15,19],[41,22,15,22],[41,24,15,2],[43,0,17,2],[43,8,17,8,"traverse"],[43,16,17,16],[43,19,17,19],[43,28,17,8,"traverse"],[43,36,17,19],[43,37,17,20,"value"],[43,42,17,19],[43,44,17,27,"path"],[43,48,17,19],[43,50,17,36],[44,0,18,4],[44,10,18,8,"value"],[44,15,18,13],[44,27,18,25,"AnimatedValue"],[44,49,18,4],[44,51,18,40],[45,0,19,6,"eventMappings"],[45,8,19,6,"eventMappings"],[45,21,19,19],[45,22,19,20,"push"],[45,26,19,6],[45,27,19,25,"path"],[45,31,19,29],[45,32,19,30,"concat"],[45,38,19,25],[45,39,19,37,"value"],[45,44,19,42],[45,45,19,43,"__nodeID"],[45,53,19,25],[45,54,19,6],[46,0,20,5],[46,7,18,4],[46,13,20,11],[46,17,20,15],[46,24,20,22,"value"],[46,29,20,15],[46,34,20,32],[46,42,20,15],[46,46,20,44,"value"],[46,51,20,49],[46,52,20,50,"__val"],[46,57,20,11],[46,59,20,57],[47,0,21,6,"eventMappings"],[47,8,21,6,"eventMappings"],[47,21,21,19],[47,22,21,20,"push"],[47,26,21,6],[47,27,21,25,"path"],[47,31,21,29],[47,32,21,30,"concat"],[47,38,21,25],[47,39,21,37,"value"],[47,44,21,42],[47,45,21,43,"__val"],[47,50,21,37],[47,51,21,49,"__nodeID"],[47,59,21,25],[47,60,21,6],[48,0,22,5],[48,7,20,11],[48,13,22,11],[48,17,22,15],[48,24,22,22,"value"],[48,29,22,15],[48,34,22,32],[48,44,22,11],[48,46,22,44],[49,0,23,6],[49,12,23,12,"node"],[49,16,23,16],[49,19,23,19],[49,23,23,23,"AnimatedValue"],[49,45,23,19],[49,46,23,37],[49,47,23,19],[49,48,23,6],[50,0,24,6,"alwaysNodes"],[50,8,24,6,"alwaysNodes"],[50,19,24,17],[50,20,24,18,"push"],[50,24,24,6],[50,25,24,23],[50,29,24,27,"AnimatedAlways"],[50,52,24,23],[50,53,24,42,"value"],[50,58,24,47],[50,59,24,48,"node"],[50,63,24,47],[50,64,24,23],[50,65,24,6],[51,0,25,6,"eventMappings"],[51,8,25,6,"eventMappings"],[51,21,25,19],[51,22,25,20,"push"],[51,26,25,6],[51,27,25,25,"path"],[51,31,25,29],[51,32,25,30,"concat"],[51,38,25,25],[51,39,25,37,"node"],[51,43,25,41],[51,44,25,42,"__nodeID"],[51,52,25,25],[51,53,25,6],[52,0,26,5],[52,7,22,11],[52,13,26,11],[52,17,26,15],[52,24,26,22,"value"],[52,29,26,15],[52,34,26,32],[52,42,26,11],[52,44,26,42],[53,0,27,6],[53,13,27,11],[53,17,27,17,"key"],[53,20,27,6],[53,24,27,24,"value"],[53,29,27,6],[53,31,27,31],[54,0,28,8,"traverse"],[54,10,28,8,"traverse"],[54,18,28,16],[54,19,28,17,"value"],[54,24,28,22],[54,25,28,23,"key"],[54,28,28,22],[54,29,28,16],[54,31,28,29,"path"],[54,35,28,33],[54,36,28,34,"concat"],[54,42,28,29],[54,43,28,41,"key"],[54,46,28,29],[54,47,28,16],[54,48,28,8],[55,0,29,7],[56,0,30,5],[57,0,31,3],[57,5,17,2],[59,0,33,2],[59,28,34,4,"argMapping"],[59,38,34,14],[59,39,34,15],[59,40,34,14],[59,41,34,4],[59,45,34,21,"argMapping"],[59,55,34,31],[59,56,34,32],[59,57,34,31],[59,58,34,21],[59,59,34,35,"nativeEvent"],[59,70,33,2],[59,72,35,4],[59,155,33,2],[60,0,39,2],[60,8,39,8,"ev"],[60,10,39,10],[60,13,39,13,"argMapping"],[60,23,39,23],[60,24,39,24],[60,25,39,23],[60,26,39,13],[60,27,39,27,"nativeEvent"],[60,38,39,2],[62,0,40,2],[62,8,40,6],[62,15,40,13,"ev"],[62,17,40,6],[62,22,40,20],[62,30,40,2],[62,32,40,30],[63,0,41,4,"traverse"],[63,6,41,4,"traverse"],[63,14,41,12],[63,15,41,13,"ev"],[63,17,41,12],[63,19,41,17],[63,21,41,12],[63,22,41,4],[64,0,42,3],[64,5,40,2],[64,11,42,9],[64,15,42,13],[64,22,42,20,"ev"],[64,24,42,13],[64,29,42,27],[64,39,42,9],[64,41,42,39],[65,0,43,4],[65,10,43,10,"proxyHandler"],[65,22,43,22],[65,25,43,25],[66,0,44,6,"get"],[66,8,44,6,"get"],[66,11,44,9],[66,13,44,11],[66,26,44,20,"target"],[66,32,44,11],[66,34,44,28,"name"],[66,38,44,11],[66,40,44,34],[67,0,45,8],[67,14,45,12,"name"],[67,18,45,16],[67,23,45,21],[67,34,45,8],[67,36,45,34],[68,0,46,10],[68,19,46,17],[68,23,46,10],[69,0,47,9],[71,0,48,8],[71,14,48,12],[71,15,48,13,"target"],[71,21,48,19],[71,22,48,20,"name"],[71,26,48,19],[71,27,48,12],[71,31,48,29,"name"],[71,35,48,33],[71,40,48,38],[71,47,48,8],[71,49,48,47],[72,0,49,10,"target"],[72,12,49,10,"target"],[72,18,49,16],[72,19,49,17,"name"],[72,23,49,16],[72,24,49,10],[72,27,49,25],[72,31,49,29,"Proxy"],[72,36,49,25],[72,37,49,35],[72,39,49,25],[72,41,49,39,"proxyHandler"],[72,53,49,25],[72,54,49,10],[73,0,50,9],[75,0,51,8],[75,17,51,15,"target"],[75,23,51,21],[75,24,51,22,"name"],[75,28,51,21],[75,29,51,8],[76,0,52,7],[76,9,43,25],[77,0,53,6,"set"],[77,8,53,6,"set"],[77,11,53,9],[77,13,53,11],[77,26,53,20,"target"],[77,32,53,11],[77,34,53,28,"prop"],[77,38,53,11],[77,40,53,34,"value"],[77,45,53,11],[77,47,53,41],[78,0,54,8],[78,14,54,12,"prop"],[78,18,54,16],[78,23,54,21],[78,30,54,8],[78,32,54,30],[79,0,55,10,"target"],[79,12,55,10,"target"],[79,18,55,16],[79,19,55,17,"prop"],[79,23,55,16],[79,24,55,10],[79,27,55,25,"value"],[79,32,55,10],[80,0,56,9],[81,0,57,7],[82,0,43,25],[82,7,43,4],[83,0,60,4],[83,10,60,10,"proxy"],[83,15,60,15],[83,18,61,6,"Platform"],[83,40,61,15,"OS"],[83,42,61,6],[83,47,61,22],[83,56,61,6],[83,59,62,10],[83,105,61,6],[83,108,63,10],[83,112,63,14,"Proxy"],[83,117,63,10],[83,118,63,20],[83,120,63,10],[83,122,63,24,"proxyHandler"],[83,134,63,10],[83,135,60,4],[84,0,64,4,"alwaysNodes"],[84,6,64,4,"alwaysNodes"],[84,17,64,15],[84,18,64,16,"push"],[84,22,64,4],[84,23,64,21],[84,27,64,25,"AnimatedAlways"],[84,50,64,21],[84,51,64,40,"ev"],[84,53,64,42],[84,54,64,43,"proxy"],[84,59,64,42],[84,60,64,21],[84,61,64,4],[85,0,65,4,"traverse"],[85,6,65,4,"traverse"],[85,14,65,12],[85,15,65,13,"proxy"],[85,20,65,12],[85,22,65,20],[85,24,65,12],[85,25,65,4],[86,0,66,3],[88,0,68,2],[88,11,68,9],[89,0,68,11,"eventMappings"],[89,6,68,11,"eventMappings"],[89,19,68,24],[89,21,68,11,"eventMappings"],[89,34,68,9],[90,0,68,26,"alwaysNodes"],[90,6,68,26,"alwaysNodes"],[90,17,68,37],[90,19,68,26,"alwaysNodes"],[91,0,68,9],[91,5,68,2],[92,0,69,1],[94,6,71,21,"AnimatedEvent"],[94,19],[97,0,72,2],[97,27,72,14,"argMapping"],[97,37,72,2],[97,39,72,39],[98,0,72,39],[100,0,72,39],[100,10,72,26,"config"],[100,16,72,39],[100,87,72,35],[100,89,72,39],[102,0,72,39],[104,0,72,39],[104,32,73,43,"sanitizeArgMapping"],[104,50,73,61],[104,51,73,62,"argMapping"],[104,61,73,61],[104,62,72,39],[105,0,72,39],[105,10,73,12,"eventMappings"],[105,23,72,39],[105,46,73,12,"eventMappings"],[105,59,72,39],[106,0,72,39],[106,10,73,27,"alwaysNodes"],[106,21,72,39],[106,44,73,27,"alwaysNodes"],[106,55,72,39],[108,0,74,4],[108,89,74,10],[109,0,74,12,"type"],[109,8,74,12,"type"],[109,12,74,16],[109,14,74,18],[109,21,74,10],[110,0,74,27,"argMapping"],[110,8,74,27,"argMapping"],[110,18,74,37],[110,20,74,39,"eventMappings"],[111,0,74,10],[111,7,74,4],[112,0,72,39],[112,12,81,2,"__isNative"],[112,22,72,39],[112,25,81,15],[112,29,72,39],[113,0,75,4],[113,12,75,9,"_alwaysNodes"],[113,24,75,4],[113,27,75,24,"alwaysNodes"],[113,38,75,4],[114,0,72,39],[115,0,76,3],[119,34,83,14,"viewRef"],[119,41],[119,43,83,23,"eventName"],[119,52],[119,54,83,34],[120,0,84,4],[120,13,84,9],[120,17,84,13,"i"],[120,18,84,14],[120,21,84,17],[120,22,84,4],[120,24,84,20,"i"],[120,25,84,21],[120,28,84,24],[120,33,84,29,"_alwaysNodes"],[120,45,84,24],[120,46,84,42,"length"],[120,52,84,4],[120,54,84,50,"i"],[120,55,84,51],[120,57,84,4],[120,59,84,55],[121,0,85,6],[121,15,85,11,"_alwaysNodes"],[121,27,85,6],[121,28,85,24,"i"],[121,29,85,6],[121,31,85,27,"__attach"],[121,39,85,6],[122,0,86,5],[124,0,87,4],[124,13,87,9,"__attach"],[124,21,87,4],[126,0,88,4],[126,12,88,10,"viewTag"],[126,19,88,17],[126,22,88,20],[126,55,88,35,"viewRef"],[126,62,88,20],[126,63,88,4],[128,0,89,4,"ReanimatedModule"],[128,34,89,21,"attachEvent"],[128,45,89,4],[128,46,89,33,"viewTag"],[128,53,89,4],[128,55,89,42,"eventName"],[128,64,89,4],[128,66,89,53],[128,71,89,58,"__nodeID"],[128,79,89,4],[129,0,90,3],[132,34,92,14,"viewRef"],[132,41],[132,43,92,23,"eventName"],[132,52],[132,54,92,34],[133,0,93,4],[133,13,93,9],[133,17,93,13,"i"],[133,18,93,14],[133,21,93,17],[133,22,93,4],[133,24,93,20,"i"],[133,25,93,21],[133,28,93,24],[133,33,93,29,"_alwaysNodes"],[133,45,93,24],[133,46,93,42,"length"],[133,52,93,4],[133,54,93,50,"i"],[133,55,93,51],[133,57,93,4],[133,59,93,55],[134,0,94,6],[134,15,94,11,"_alwaysNodes"],[134,27,94,6],[134,28,94,24,"i"],[134,29,94,6],[134,31,94,27,"isNativelyInitialized"],[134,52,94,6],[134,58,95,8],[134,63,95,13,"_alwaysNodes"],[134,75,95,8],[134,76,95,26,"i"],[134,77,95,8],[134,79,95,29,"__detach"],[134,87,95,8],[134,89,94,6],[135,0,96,5],[137,0,97,4],[137,12,97,10,"viewTag"],[137,19,97,17],[137,22,97,20],[137,55,97,35,"viewRef"],[137,62,97,20],[137,63,97,4],[139,0,98,4,"ReanimatedModule"],[139,34,98,21,"detachEvent"],[139,45,98,4],[139,46,98,33,"viewTag"],[139,53,98,4],[139,55,98,42,"eventName"],[139,64,98,4],[139,66,98,53],[139,71,98,58,"__nodeID"],[139,79,98,4],[141,0,99,4],[141,13,99,9,"__detach"],[141,21,99,4],[142,0,100,3],[146,4,71,43,"AnimatedNode"],[146,26]]},"type":"js/module"}]}