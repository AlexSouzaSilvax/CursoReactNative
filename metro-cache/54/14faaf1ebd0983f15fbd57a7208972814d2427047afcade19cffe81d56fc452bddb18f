{"dependencies":[{"name":"eventemitter3","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n  function _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\n  function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n  function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n  function _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\n  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n  var EventEmitter = _$$_REQUIRE(_dependencyMap[0], \"eventemitter3\");\n\n  var MetroClient = function (_EventEmitter) {\n    _inherits(MetroClient, _EventEmitter);\n\n    function MetroClient(url) {\n      var _this;\n\n      _classCallCheck(this, MetroClient);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(MetroClient).call(this));\n      _this._url = url;\n      return _this;\n    }\n\n    _createClass(MetroClient, [{\n      key: \"enable\",\n      value: function enable() {\n        var _this2 = this;\n\n        if (this._ws) {\n          this.disable();\n        }\n\n        this._ws = new global.WebSocket(this._url);\n\n        this._ws.onerror = function (error) {\n          _this2.emit('connection-error', error);\n        };\n\n        this._ws.onclose = function () {\n          _this2.emit('close');\n        };\n\n        this._ws.onmessage = function (message) {\n          var data = JSON.parse(message.data);\n\n          switch (data.type) {\n            case 'update-start':\n              _this2.emit('update-start');\n\n              break;\n\n            case 'update':\n              var _data$body = data.body;\n              var modules = _data$body.modules,\n                  sourceMappingURLs = _data$body.sourceMappingURLs,\n                  sourceURLs = _data$body.sourceURLs;\n\n              _this2.emit('update');\n\n              modules.forEach(function (_ref, i) {\n                var id = _ref.id,\n                    code = _ref.code;\n                code += '\\n\\n' + sourceMappingURLs[i];\n                var injectFunction = typeof global.nativeInjectHMRUpdate === 'function' ? global.nativeInjectHMRUpdate : eval;\n                injectFunction(code, sourceURLs[i]);\n              });\n              break;\n\n            case 'update-done':\n              _this2.emit('update-done');\n\n              break;\n\n            case 'error':\n              _this2.emit('error', data.body);\n\n              break;\n\n            default:\n              _this2.emit('error', {\n                type: 'unknown-message',\n                message: data\n              });\n\n          }\n        };\n      }\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        if (this._ws) {\n          this._ws.close();\n\n          this._ws = undefined;\n        }\n      }\n    }]);\n\n    return MetroClient;\n  }(EventEmitter);\n\n  module.exports = MetroClient;\n});","map":[[2,0,10,0],[20,0,12,0],[20,6,12,6,"EventEmitter"],[20,18,12,18],[20,21,12,21,"require"],[20,32,12,28],[20,68,12,0],[22,6,18,6,"MetroClient"],[22,17],[25,0,22,2],[25,25,22,14,"url"],[25,28,22,2],[25,30,22,19],[26,0,22,19],[28,0,22,19],[30,0,23,4],[31,0,24,4],[31,12,24,9,"_url"],[31,16,24,4],[31,19,24,16,"url"],[31,22,24,4],[32,0,22,19],[33,0,25,3],[37,31,27,11],[38,0,27,11],[40,0,28,4],[40,12,28,8],[40,17,28,13,"_ws"],[40,20,28,4],[40,22,28,18],[41,0,29,6],[41,15,29,11,"disable"],[41,22,29,6],[42,0,30,5],[44,0,34,4],[44,13,34,9,"_ws"],[44,16,34,4],[44,19,34,15],[44,23,34,19,"global"],[44,29,34,25],[44,30,34,26,"WebSocket"],[44,39,34,15],[44,40,34,36],[44,45,34,41,"_url"],[44,49,34,15],[44,50,34,4],[46,0,35,4],[46,13,35,9,"_ws"],[46,16,35,4],[46,17,35,13,"onerror"],[46,24,35,4],[46,27,35,23],[46,37,35,23,"error"],[46,42,35,28],[46,44,35,32],[47,0,36,6],[47,10,36,6],[47,16,36,10],[47,17,36,11,"emit"],[47,21,36,6],[47,22,36,16],[47,40,36,6],[47,42,36,36,"error"],[47,47,36,6],[48,0,37,5],[48,9,35,4],[50,0,38,4],[50,13,38,9,"_ws"],[50,16,38,4],[50,17,38,13,"onclose"],[50,24,38,4],[50,27,38,23],[50,39,38,29],[51,0,39,6],[51,10,39,6],[51,16,39,10],[51,17,39,11,"emit"],[51,21,39,6],[51,22,39,16],[51,29,39,6],[52,0,40,5],[52,9,38,4],[54,0,41,4],[54,13,41,9,"_ws"],[54,16,41,4],[54,17,41,13,"onmessage"],[54,26,41,4],[54,29,41,25],[54,39,41,25,"message"],[54,46,41,32],[54,48,41,36],[55,0,42,6],[55,14,42,12,"data"],[55,18,42,16],[55,21,42,19,"JSON"],[55,25,42,23],[55,26,42,24,"parse"],[55,31,42,19],[55,32,42,30,"message"],[55,39,42,37],[55,40,42,38,"data"],[55,44,42,19],[55,45,42,6],[57,0,43,6],[57,18,43,14,"data"],[57,22,43,18],[57,23,43,19,"type"],[57,27,43,6],[58,0,44,8],[58,17,44,13],[58,31,44,8],[59,0,45,10],[59,14,45,10],[59,20,45,14],[59,21,45,15,"emit"],[59,25,45,10],[59,26,45,20],[59,40,45,10],[61,0,46,10],[63,0,48,8],[63,17,48,13],[63,25,48,8],[64,0,48,22],[64,18,48,26,"_data$body"],[64,28,48,36],[64,31,49,10,"data"],[64,35,49,14],[64,36,49,15,"body"],[64,40,48,22],[65,0,49,20],[65,18,49,26,"modules"],[65,25,49,33],[65,28,49,36,"_data$body"],[65,38,49,46],[65,39,49,47,"modules"],[65,46,49,20],[66,0,49,20],[66,18,49,55,"sourceMappingURLs"],[66,35,49,72],[66,38,49,75,"_data$body"],[66,48,49,85],[66,49,49,86,"sourceMappingURLs"],[66,66,49,20],[67,0,49,20],[67,18,49,104,"sourceURLs"],[67,28,49,114],[67,31,49,117,"_data$body"],[67,41,49,127],[67,42,49,128,"sourceURLs"],[67,52,49,20],[69,0,51,10],[69,14,51,10],[69,20,51,14],[69,21,51,15,"emit"],[69,25,51,10],[69,26,51,20],[69,34,51,10],[71,0,52,10,"modules"],[71,14,52,10,"modules"],[71,21,52,17],[71,22,52,18,"forEach"],[71,29,52,10],[71,30,52,26],[71,40,52,27,"_ref"],[71,44,52,26],[71,46,52,33,"i"],[71,47,52,26],[71,49,52,39],[72,0,52,40],[72,20,52,44,"id"],[72,22,52,46],[72,25,52,49,"_ref"],[72,29,52,53],[72,30,52,54,"id"],[72,32,52,40],[73,0,52,40],[73,20,52,57,"code"],[73,24,52,61],[73,27,52,64,"_ref"],[73,31,52,68],[73,32,52,69,"code"],[73,36,52,40],[74,0,53,12,"code"],[74,16,53,12,"code"],[74,20,53,16],[74,24,53,20],[74,33,53,29,"sourceMappingURLs"],[74,50,53,46],[74,51,53,47,"i"],[74,52,53,46],[74,53,53,12],[75,0,58,12],[75,20,58,18,"injectFunction"],[75,34,58,32],[75,37,59,12],[75,44,59,19,"global"],[75,50,59,25],[75,51,59,26,"nativeInjectHMRUpdate"],[75,72,59,12],[75,77,59,52],[75,87,59,12],[75,90,60,12,"global"],[75,96,60,18],[75,97,60,19,"nativeInjectHMRUpdate"],[75,118,59,12],[75,121,61,12,"eval"],[75,125,58,12],[76,0,63,12,"injectFunction"],[76,16,63,12,"injectFunction"],[76,30,63,26],[76,31,63,27,"code"],[76,35,63,26],[76,37,63,33,"sourceURLs"],[76,47,63,43],[76,48,63,44,"i"],[76,49,63,43],[76,50,63,26],[76,51,63,12],[77,0,64,11],[77,15,52,10],[78,0,65,10],[80,0,67,8],[80,17,67,13],[80,30,67,8],[81,0,68,10],[81,14,68,10],[81,20,68,14],[81,21,68,15,"emit"],[81,25,68,10],[81,26,68,20],[81,39,68,10],[83,0,69,10],[85,0,71,8],[85,17,71,13],[85,24,71,8],[86,0,72,10],[86,14,72,10],[86,20,72,14],[86,21,72,15,"emit"],[86,25,72,10],[86,26,72,20],[86,33,72,10],[86,35,72,29,"data"],[86,39,72,33],[86,40,72,34,"body"],[86,44,72,10],[88,0,73,10],[90,0,75,8],[91,0,76,10],[91,14,76,10],[91,20,76,14],[91,21,76,15,"emit"],[91,25,76,10],[91,26,76,20],[91,33,76,10],[91,35,76,29],[92,0,76,31,"type"],[92,16,76,31,"type"],[92,20,76,35],[92,22,76,37],[92,39,76,29],[93,0,76,56,"message"],[93,16,76,56,"message"],[93,23,76,63],[93,25,76,65,"data"],[94,0,76,29],[94,15,76,10],[96,0,43,6],[97,0,78,5],[97,9,41,4],[98,0,79,3],[101,32,81,12],[102,0,82,4],[102,12,82,8],[102,17,82,13,"_ws"],[102,20,82,4],[102,22,82,18],[103,0,83,6],[103,15,83,11,"_ws"],[103,18,83,6],[103,19,83,15,"close"],[103,24,83,6],[105,0,84,6],[105,15,84,11,"_ws"],[105,18,84,6],[105,21,84,17,"undefined"],[105,30,84,6],[106,0,85,5],[107,0,86,3],[111,4,18,26,"EventEmitter"],[111,16],[113,0,89,0,"module"],[113,2,89,0,"module"],[113,8,89,6],[113,9,89,7,"exports"],[113,16,89,0],[113,19,89,17,"MetroClient"],[113,30,89,0]]},"type":"js/module"}]}