{"dependencies":[{"name":"event-target-shim","data":{"isAsync":false}},{"name":"./Blob","data":{"isAsync":false}},{"name":"../BatchedBridge/NativeModules","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n  function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\n  function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n  function _possibleConstructorReturn(self, call) { if (call && (typeof call === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\n  function _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\n  function _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\n  function _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\n  function _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n  var EventTarget = _$$_REQUIRE(_dependencyMap[0], \"event-target-shim\");\n\n  var Blob = _$$_REQUIRE(_dependencyMap[1], \"./Blob\");\n\n  var _require = _$$_REQUIRE(_dependencyMap[2], \"../BatchedBridge/NativeModules\"),\n      FileReaderModule = _require.FileReaderModule;\n\n  var READER_EVENTS = ['abort', 'error', 'load', 'loadstart', 'loadend', 'progress'];\n  var EMPTY = 0;\n  var LOADING = 1;\n  var DONE = 2;\n\n  var FileReader = function (_EventTarget) {\n    _inherits(FileReader, _EventTarget);\n\n    function FileReader() {\n      var _this;\n\n      _classCallCheck(this, FileReader);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(FileReader).call(this));\n      _this.EMPTY = EMPTY;\n      _this.LOADING = LOADING;\n      _this.DONE = DONE;\n      _this._aborted = false;\n      _this._subscriptions = [];\n\n      _this._reset();\n\n      return _this;\n    }\n\n    _createClass(FileReader, [{\n      key: \"_reset\",\n      value: function _reset() {\n        this._readyState = EMPTY;\n        this._error = null;\n        this._result = null;\n      }\n    }, {\n      key: \"_clearSubscriptions\",\n      value: function _clearSubscriptions() {\n        this._subscriptions.forEach(function (sub) {\n          return sub.remove();\n        });\n\n        this._subscriptions = [];\n      }\n    }, {\n      key: \"_setReadyState\",\n      value: function _setReadyState(newState) {\n        this._readyState = newState;\n        this.dispatchEvent({\n          type: 'readystatechange'\n        });\n\n        if (newState === DONE) {\n          if (this._aborted) {\n            this.dispatchEvent({\n              type: 'abort'\n            });\n          } else if (this._error) {\n            this.dispatchEvent({\n              type: 'error'\n            });\n          } else {\n            this.dispatchEvent({\n              type: 'load'\n            });\n          }\n\n          this.dispatchEvent({\n            type: 'loadend'\n          });\n        }\n      }\n    }, {\n      key: \"readAsArrayBuffer\",\n      value: function readAsArrayBuffer() {\n        throw new Error('FileReader.readAsArrayBuffer is not implemented');\n      }\n    }, {\n      key: \"readAsDataURL\",\n      value: function readAsDataURL(blob) {\n        var _this2 = this;\n\n        this._aborted = false;\n        FileReaderModule.readAsDataURL(blob.data).then(function (text) {\n          if (_this2._aborted) {\n            return;\n          }\n\n          _this2._result = text;\n\n          _this2._setReadyState(DONE);\n        }, function (error) {\n          if (_this2._aborted) {\n            return;\n          }\n\n          _this2._error = error;\n\n          _this2._setReadyState(DONE);\n        });\n      }\n    }, {\n      key: \"readAsText\",\n      value: function readAsText(blob) {\n        var _this3 = this;\n\n        var encoding = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'UTF-8';\n        this._aborted = false;\n        FileReaderModule.readAsText(blob.data, encoding).then(function (text) {\n          if (_this3._aborted) {\n            return;\n          }\n\n          _this3._result = text;\n\n          _this3._setReadyState(DONE);\n        }, function (error) {\n          if (_this3._aborted) {\n            return;\n          }\n\n          _this3._error = error;\n\n          _this3._setReadyState(DONE);\n        });\n      }\n    }, {\n      key: \"abort\",\n      value: function abort() {\n        this._aborted = true;\n\n        if (this._readyState !== EMPTY && this._readyState !== DONE) {\n          this._reset();\n\n          this._setReadyState(DONE);\n        }\n\n        this._reset();\n      }\n    }, {\n      key: \"readyState\",\n      get: function get() {\n        return this._readyState;\n      }\n    }, {\n      key: \"error\",\n      get: function get() {\n        return this._error;\n      }\n    }, {\n      key: \"result\",\n      get: function get() {\n        return this._result;\n      }\n    }]);\n\n    return FileReader;\n  }(EventTarget.apply(void 0, READER_EVENTS));\n\n  FileReader.EMPTY = EMPTY;\n  FileReader.LOADING = LOADING;\n  FileReader.DONE = DONE;\n  module.exports = FileReader;\n});","map":[[2,0,11,0],[20,0,13,0],[20,6,13,6,"EventTarget"],[20,17,13,17],[20,20,13,20,"require"],[20,31,13,27],[20,71,13,0],[22,0,14,0],[22,6,14,6,"Blob"],[22,10,14,10],[22,13,14,13,"require"],[22,24,14,20],[22,53,14,0],[24,17,15,27,"require"],[24,28,15,34],[24,81],[25,6,15,7,"FileReaderModule"],[25,22],[25,34,15,7,"FileReaderModule"],[25,50],[27,0,24,0],[27,6,24,6,"READER_EVENTS"],[27,19,24,19],[27,22,24,22],[27,23,25,2],[27,30,24,22],[27,32,26,2],[27,39,24,22],[27,41,27,2],[27,47,24,22],[27,49,28,2],[27,60,24,22],[27,62,29,2],[27,71,24,22],[27,73,30,2],[27,83,24,22],[27,84,24,0],[28,0,33,0],[28,6,33,6,"EMPTY"],[28,11,33,11],[28,14,33,14],[28,15,33,0],[29,0,34,0],[29,6,34,6,"LOADING"],[29,13,34,13],[29,16,34,16],[29,17,34,0],[30,0,35,0],[30,6,35,6,"DONE"],[30,10,35,10],[30,13,35,13],[30,14,35,0],[32,6,37,6,"FileReader"],[32,16],[35,0,52,2],[35,26,52,16],[36,0,52,16],[38,0,52,16],[40,0,53,4],[41,0,52,16],[41,12,42,2,"EMPTY"],[41,17,52,16],[41,20,42,10,"EMPTY"],[41,25,52,16],[42,0,52,16],[42,12,43,2,"LOADING"],[42,19,52,16],[42,22,43,12,"LOADING"],[42,29,52,16],[43,0,52,16],[43,12,44,2,"DONE"],[43,16,52,16],[43,19,44,9,"DONE"],[43,23,52,16],[44,0,52,16],[44,12,49,2,"_aborted"],[44,20,52,16],[44,23,49,22],[44,28,52,16],[45,0,52,16],[45,12,50,2,"_subscriptions"],[45,26,52,16],[45,29,50,29],[45,31,52,16],[47,0,54,4],[47,12,54,9,"_reset"],[47,18,54,4],[49,0,52,16],[50,0,55,3],[54,31,57,17],[55,0,58,4],[55,13,58,9,"_readyState"],[55,24,58,4],[55,27,58,23,"EMPTY"],[55,32,58,4],[56,0,59,4],[56,13,59,9,"_error"],[56,19,59,4],[56,22,59,18],[56,26,59,4],[57,0,60,4],[57,13,60,9,"_result"],[57,20,60,4],[57,23,60,19],[57,27,60,4],[58,0,61,3],[61,44,63,30],[62,0,64,4],[62,13,64,9,"_subscriptions"],[62,27,64,4],[62,28,64,24,"forEach"],[62,35,64,4],[62,36,64,32],[62,46,64,32,"sub"],[62,49,64,35],[63,0,64,35],[63,17,64,39,"sub"],[63,20,64,42],[63,21,64,43,"remove"],[63,27,64,39],[63,29,64,35],[64,0,64,35],[64,9,64,4],[66,0,65,4],[66,13,65,9,"_subscriptions"],[66,27,65,4],[66,30,65,26],[66,32,65,4],[67,0,66,3],[70,37,68,17,"newState"],[70,45],[70,47,68,39],[71,0,69,4],[71,13,69,9,"_readyState"],[71,24,69,4],[71,27,69,23,"newState"],[71,35,69,4],[72,0,70,4],[72,13,70,9,"dispatchEvent"],[72,26,70,4],[72,27,70,23],[73,0,70,24,"type"],[73,10,70,24,"type"],[73,14,70,28],[73,16,70,30],[74,0,70,23],[74,9,70,4],[76,0,71,4],[76,12,71,8,"newState"],[76,20,71,16],[76,25,71,21,"DONE"],[76,29,71,4],[76,31,71,27],[77,0,72,6],[77,14,72,10],[77,19,72,15,"_aborted"],[77,27,72,6],[77,29,72,25],[78,0,73,8],[78,17,73,13,"dispatchEvent"],[78,30,73,8],[78,31,73,27],[79,0,73,28,"type"],[79,14,73,28,"type"],[79,18,73,32],[79,20,73,34],[80,0,73,27],[80,13,73,8],[81,0,74,7],[81,11,72,6],[81,17,74,13],[81,21,74,17],[81,26,74,22,"_error"],[81,32,74,13],[81,34,74,30],[82,0,75,8],[82,17,75,13,"dispatchEvent"],[82,30,75,8],[82,31,75,27],[83,0,75,28,"type"],[83,14,75,28,"type"],[83,18,75,32],[83,20,75,34],[84,0,75,27],[84,13,75,8],[85,0,76,7],[85,11,74,13],[85,17,76,13],[86,0,77,8],[86,17,77,13,"dispatchEvent"],[86,30,77,8],[86,31,77,27],[87,0,77,28,"type"],[87,14,77,28,"type"],[87,18,77,32],[87,20,77,34],[88,0,77,27],[88,13,77,8],[89,0,78,7],[91,0,79,6],[91,15,79,11,"dispatchEvent"],[91,28,79,6],[91,29,79,25],[92,0,79,26,"type"],[92,12,79,26,"type"],[92,16,79,30],[92,18,79,32],[93,0,79,25],[93,11,79,6],[94,0,80,5],[95,0,81,3],[98,42,83,22],[99,0,84,4],[99,14,84,10],[99,18,84,14,"Error"],[99,23,84,10],[99,24,84,20],[99,73,84,10],[99,74,84,4],[100,0,85,3],[103,36,87,16,"blob"],[103,40],[103,42,87,28],[104,0,87,28],[106,0,88,4],[106,13,88,9,"_aborted"],[106,21,88,4],[106,24,88,20],[106,29,88,4],[107,0,90,4,"FileReaderModule"],[107,8,90,4,"FileReaderModule"],[107,24,90,20],[107,25,90,21,"readAsDataURL"],[107,38,90,4],[107,39,90,35,"blob"],[107,43,90,39],[107,44,90,40,"data"],[107,48,90,4],[107,50,90,46,"then"],[107,54,90,4],[107,55,91,6],[107,65,91,7,"text"],[107,69,91,6],[107,71,91,24],[108,0,92,8],[108,14,92,12],[108,20,92,16],[108,21,92,17,"_aborted"],[108,29,92,8],[108,31,92,27],[109,0,93,10],[110,0,94,9],[112,0,95,8],[112,10,95,8],[112,16,95,12],[112,17,95,13,"_result"],[112,24,95,8],[112,27,95,23,"text"],[112,31,95,8],[114,0,96,8],[114,10,96,8],[114,16,96,12],[114,17,96,13,"_setReadyState"],[114,31,96,8],[114,32,96,28,"DONE"],[114,36,96,8],[115,0,97,7],[115,9,90,4],[115,11,98,6],[115,21,98,6,"error"],[115,26,98,11],[115,28,98,15],[116,0,99,8],[116,14,99,12],[116,20,99,16],[116,21,99,17,"_aborted"],[116,29,99,8],[116,31,99,27],[117,0,100,10],[118,0,101,9],[120,0,102,8],[120,10,102,8],[120,16,102,12],[120,17,102,13,"_error"],[120,23,102,8],[120,26,102,22,"error"],[120,31,102,8],[122,0,103,8],[122,10,103,8],[122,16,103,12],[122,17,103,13,"_setReadyState"],[122,31,103,8],[122,32,103,28,"DONE"],[122,36,103,8],[123,0,104,7],[123,9,90,4],[124,0,106,3],[127,33,108,13,"blob"],[127,37],[127,39,108,53],[128,0,108,53],[130,0,108,53],[130,12,108,25,"encoding"],[130,20,108,53],[130,91,108,44],[130,98,108,53],[131,0,109,4],[131,13,109,9,"_aborted"],[131,21,109,4],[131,24,109,20],[131,29,109,4],[132,0,111,4,"FileReaderModule"],[132,8,111,4,"FileReaderModule"],[132,24,111,20],[132,25,111,21,"readAsText"],[132,35,111,4],[132,36,111,32,"blob"],[132,40,111,36],[132,41,111,37,"data"],[132,45,111,4],[132,47,111,43,"encoding"],[132,55,111,4],[132,57,111,53,"then"],[132,61,111,4],[132,62,112,6],[132,72,112,7,"text"],[132,76,112,6],[132,78,112,24],[133,0,113,8],[133,14,113,12],[133,20,113,16],[133,21,113,17,"_aborted"],[133,29,113,8],[133,31,113,27],[134,0,114,10],[135,0,115,9],[137,0,116,8],[137,10,116,8],[137,16,116,12],[137,17,116,13,"_result"],[137,24,116,8],[137,27,116,23,"text"],[137,31,116,8],[139,0,117,8],[139,10,117,8],[139,16,117,12],[139,17,117,13,"_setReadyState"],[139,31,117,8],[139,32,117,28,"DONE"],[139,36,117,8],[140,0,118,7],[140,9,111,4],[140,11,119,6],[140,21,119,6,"error"],[140,26,119,11],[140,28,119,15],[141,0,120,8],[141,14,120,12],[141,20,120,16],[141,21,120,17,"_aborted"],[141,29,120,8],[141,31,120,27],[142,0,121,10],[143,0,122,9],[145,0,123,8],[145,10,123,8],[145,16,123,12],[145,17,123,13,"_error"],[145,23,123,8],[145,26,123,22,"error"],[145,31,123,8],[147,0,124,8],[147,10,124,8],[147,16,124,12],[147,17,124,13,"_setReadyState"],[147,31,124,8],[147,32,124,28,"DONE"],[147,36,124,8],[148,0,125,7],[148,9,111,4],[149,0,127,3],[152,30,129,10],[153,0,130,4],[153,13,130,9,"_aborted"],[153,21,130,4],[153,24,130,20],[153,28,130,4],[155,0,132,4],[155,12,132,8],[155,17,132,13,"_readyState"],[155,28,132,8],[155,33,132,29,"EMPTY"],[155,38,132,8],[155,42,132,38],[155,47,132,43,"_readyState"],[155,58,132,38],[155,63,132,59,"DONE"],[155,67,132,4],[155,69,132,65],[156,0,133,6],[156,15,133,11,"_reset"],[156,21,133,6],[158,0,134,6],[158,15,134,11,"_setReadyState"],[158,29,134,6],[158,30,134,26,"DONE"],[158,34,134,6],[159,0,135,5],[161,0,137,4],[161,13,137,9,"_reset"],[161,19,137,4],[162,0,138,3],[165,26,140,31],[166,0,141,4],[166,15,141,11],[166,20,141,16,"_readyState"],[166,31,141,4],[167,0,142,3],[170,26,144,22],[171,0,145,4],[171,15,145,11],[171,20,145,16,"_error"],[171,26,145,4],[172,0,146,3],[175,26,148,30],[176,0,149,4],[176,15,149,11],[176,20,149,16,"_result"],[176,27,149,4],[177,0,150,3],[181,4,37,25,"EventTarget"],[181,15,37,36],[181,21,37,25],[181,30,37,40,"READER_EVENTS"],[181,43,37,25],[181,44],[183,0,37,6,"FileReader"],[183,2,37,6,"FileReader"],[183,12],[183,13,38,9,"EMPTY"],[183,18],[183,21,38,17,"EMPTY"],[183,26],[184,0,37,6,"FileReader"],[184,2,37,6,"FileReader"],[184,12],[184,13,39,9,"LOADING"],[184,20],[184,23,39,19,"LOADING"],[184,30],[185,0,37,6,"FileReader"],[185,2,37,6,"FileReader"],[185,12],[185,13,40,9,"DONE"],[185,17],[185,20,40,16,"DONE"],[185,24],[186,0,153,0,"module"],[186,2,153,0,"module"],[186,8,153,6],[186,9,153,7,"exports"],[186,16,153,0],[186,19,153,17,"FileReader"],[186,29,153,0]]},"type":"js/module"}]}